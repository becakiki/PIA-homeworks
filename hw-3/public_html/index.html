<html>
    <head>
        <title>Kviz</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Bootstrap CSS CDN-->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

        <!-- Google Font's -->
        <!--<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,800;1,600&display=swap" rel="stylesheet"/>-->
        <!-- Font Awesome-->
        <script src="https://use.fontawesome.com/69224dbb61.js"></script>
        <!-- Bootstrap biblioteka u projektu radi primera-->
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
        <!--  Main CSS-->
        <link rel="stylesheet" type="text/css" href="css/main.css">
        <!-- Responsive CSS -->
        <!--<link rel="stylesheet" type="text/css" href="css/responsive.css">-->

        <script src="js/jquery-3.5.1.min.js" type="text/javascript"></script>

        <script type="text/javascript">
            var imeIgraca;
            var tacniOdgovori;
            var timerInterval;

            $(document).ready(function () {
                $.getJSON("data/pitanja.json", function (data) {
                    console.log(data);
                    $.each(data, function (index, pitanje) {
                        console.log(pitanje.pitanje);
                    });
                });

                $("#ime").on("keyup", function () {
                    if ($(this).val() === "")
                        $("#btn_start").prop("disabled", true);
                    else
                        $("#btn_start").prop("disabled", false);
                });

                $("#btn_pocni").on("click", function () {
                    if ($("#ime").val() !== "") {
                        $(".pocetak").fadeOut();
                        $("#pravilaModal").modal("toggle");
                        imeIgraca = $("#ime").val();
                        tacniOdgovori = 0;
                        setTimeout(function() {$("#pitanja").fadeIn()}, 500);
                    }
                });
                
                $("#btn_odgovori").on("click", function(event) {
                    console.log($(this).parent().parent().find("input[data-tacno='true']"));
                    
                    $(this).next().addClass("disabled")
                    $(this).addClass("disabled");
                    $(this).parent().parent().find("label").addClass("disabled");
                    
                    if($(this).parent().parent().find("input[name='odgovor']:checked").data("tacno")) {
                        $(this).parent().parent().parent().addClass("border-success");
                        $(this).parent().parent().prev().addClass("text-success");
                        $(this).parent().children("#poruka").addClass("text-success");
                        $(this).parent().children("#poruka").html("Tačan odgovor!");
                        $(this).parent().parent().find("input[data-tacno='true']").parent().removeClass("disabled");
                        $(this).parent().parent().find("input[data-tacno='true']").parent().removeClass("btn-light");
                        $(this).parent().parent().find("input[data-tacno='true']").parent().addClass("btn-success");
                    }
                    else {
                        $(this).parent().parent().parent().addClass("border-danger");
                        $(this).parent().parent().prev().addClass("text-danger");
                        $(this).parent().children("#poruka").addClass("text-danger");
                        $(this).parent().children("#poruka").html("Netačan odgovor!");
                    }
                });
            });
        </script>
    </head>
    <body>
        <div class="pocetak text-center" style="display: none;">
            <h1 class="h3 mb-3">Unesite vaše ime</h1>
            <input id="ime" class="form-control" placeholder="Vaše ime" required autofocus>
            <button type="button" class="w-100 btn btn-lg btn-primary" id="btn_start" style="margin-top: 20px" data-toggle="modal" data-target="#pravilaModal" disabled>Start</button>
        </div>

        <!-- Pravila -->
        <div class="modal fade" id="pravilaModal" tabindex="-1" role="dialog" aria-labelledby="pravilaModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="pravilaModalLabel">Pravila kviza</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        Pred vama su 10 pitanja na koje trebati dati tačne odgovore.<br /><br />
                        Neka od pitanja će imati ponuđene odgovore od kojih trebate izabrati jedan tačan odgovor, dok ćete za neka od pitanja odgovor unositi preko tastature u za to predviđeno polje.<br /><br />
                        Za svako pitanje ćete imati po 20 sekundi za odgovor i svaki tačan odgovor donosi 1 poen. Kada izaberete ili unesete odgovor na pitanje pritisnite na dugme "Odgovori" kako biste proverili da li je vaš odgovor tačan. Ukoliko ne znate odgovor na pitanje, možete ga preskočiti na za to određeno dugme.<br /><br />
                        Kada date odgovor na pitanje ili preskočite neko pitanje, kviz će preći na sledeće pitanje i nećete biti u mogućnosti da se vratite na neko od prethodnih pitanja.<br /><br />
                        Takođe, ukoliko istekne predviđeno vreme za odgovori, kviz će preći na sledeće pitanje i smatraće se da je odgovor na trenutno pitanje netačan.<br /><br />
                        Pritisnite dugme "Počni kviz" i srećno sa odgovaranjem!
                    </div>
                    <div class="modal-footer">
                        <button id="btn_pocni" type="button" class="btn btn-primary">Počni kviz</button>
                    </div>
                </div>
            </div>
        </div>

        <!--Pitanja -->
        <!--<div id="pitanja" class="w-75 mx-auto" style="display: none;">-->
        <div id="pitanja" class="w-75 mx-auto">
            <div class="card" id="pitanje1">
                <!--<h3 class="card-header">Pitanje 1</h3>-->
                <div class="card-header">
                    <h3 style="float: left;">Pitanje 1</h3>
                    <h4 id="vreme" class="pt-1" style="float: right;">0:20</h4>
                </div>
                <div class="card-body">
                    <h5 class="card-title">Tekst pitanja</h5>
                    <div class="btn-group-toggle text-center" id="odgovori" data-toggle="buttons">
                        <label class="btn btn-light border-dark m-1">
                            <input type="radio" name="odgovor" data-tacno="false" id="option1">Odgovor 1
                        </label>
                        <label class="btn btn-light border-dark m-1">
                            <input type="radio" name="odgovor" data-tacno="true" id="option2">Odgovor 2
                        </label>
                        <label class="btn btn-light border-dark m-1">
                            <input type="radio" name="odgovor" data-tacno="false" id="option3">Odgovor 3
                        </label>
                    </div>
                    
                    <div id="odgovori_unos">
                        <input type="text" class="form-control mt-1" id="odgovor_unos" placeholder="Unesite vaš odgovor">
                    </div>
                    
                    <div class="mt-4">
                        <a id="btn_odgovori" class="btn btn-primary text-white float-right">Odgovori</a>
                        <a id="btn_preskoci" class="btn btn-secondary text-white float-left">Preskoči pitanje</a>
                        <div id="poruka" class="float-right mr-3 pt-2"></div>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    </body>
</html>
